---
description: ABCO AI project overview and architecture guidelines
globs: ["**"]
alwaysApply: true
---

# ABCO AI - Ohmni Assistant

## Mission
Offline-capable, mobile-first assistant for field electricians (NEC look-ups, AI chat, uploads, notes).

## Architecture
1. **frontend/** → Next.js 15.3.3 (App Router, RSC)  
2. **backend/** → Flask 3.1 (PostgreSQL, Redis, AI clients)  
3. **Azure** → AI Search, Cosmos DB (Mongo API), Blob Storage

## Core Endpoints
- `/api/auth/*` - Authentication (login, register, refresh, profile)
- `/api/chat/*` - Chat sessions with SSE at /chat/{id}/stream
- `/api/nfpa70/*` - Electrical code lookups
- `/api/upload/*` - File upload and AI analysis
- `/api/notes/*` - Note management

## Hard Rules
1. Frontend never talks directly to DB—API only
2. Preserve offline workflow (React Query hydration + Zustand queue)
3. Always use `process.env.NEXT_PUBLIC_BACKEND_URL`
4. All API calls need JWT token from NextAuth session
